<div class="product-container">

  <!-- Toggle to Show/Hide Table -->
  <mat-slide-toggle [(ngModel)]="showTable">
    {{ showTable ? 'Hide Products' : 'Show Products' }}
  </mat-slide-toggle>

  <!-- Add Product Form -->
  <form (ngSubmit)="onSubmit()" #productForm="ngForm" class="product-form">

    <mat-form-field appearance="outline">
      <mat-label>Product Name</mat-label>
      <input matInput name="name" [(ngModel)]="product.name" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Product Code</mat-label>
      <input matInput name="code" [(ngModel)]="product.code" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Size</mat-label>
      <input matInput name="size" [(ngModel)]="product.size" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Price</mat-label>
      <input matInput type="number" name="price" [(ngModel)]="product.price" required />
    </mat-form-field>

    <!-- Image Upload -->
    <div class="file-upload">
      <button mat-raised-button color="primary" type="button" (click)="fileInput.click()">
        Choose Image
      </button>
      <span class="file-name">{{ selectedFile?.name || 'No file selected' }}</span>
      <input type="file" #fileInput (change)="onFileSelected($event)" style="display:none" />
    </div>

    <button mat-raised-button color="accent" type="submit">
      Save Product
    </button>

  </form>

  <!-- Product Table -->
  <div *ngIf="showTable" class="product-table">
    <table mat-table [dataSource]="products" class="mat-elevation-z8">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let product"> {{ product.name }} </td>
      </ng-container>

      <ng-container matColumnDef="code">
        <th mat-header-cell *matHeaderCellDef> Code </th>
        <td mat-cell *matCellDef="let product"> {{ product.code }} </td>
      </ng-container>

      <ng-container matColumnDef="size">
        <th mat-header-cell *matHeaderCellDef> Size </th>
        <td mat-cell *matCellDef="let product"> {{ product.size }} </td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price </th>
        <td mat-cell *matCellDef="let product"> {{ product.price }} </td>
      </ng-container>

      <ng-container matColumnDef="image">
        <th mat-header-cell *matHeaderCellDef> Image </th>
        <td mat-cell *matCellDef="let product">
          <img [src]="'data:image/jpeg;base64,' + product.image" alt="Product" height="50">
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
  </div>

</div>
